#!usr/bin/env python3

import os, sys, re
dico = {}

def parcours(repertoire) :
    liste = os.listdir(repertoire)

    for element in liste :
        if(os.path.isdir(repertoire + "/" + element) and not os.path.islink(repertoire + "/" + element)) :
            parcours(repertoire + "/" + element);
        else :
            res = re.search(".*\.(\w+)$", element)
            if res:
                if res.group(1) in dico.keys():
                    dico[res.group(1)] =  dico[res.group(1)] + 1
                else:
                    dico[res.group(1)] = 1

                    
if len(sys.argv) != 2 or not os.path.isdir(sys.argv[1]):
    print("Usage:", sys.argv[0], "repertoire")
    sys.exit(1)

parcours(sys.argv[1])
res = 0
for ext in dico.keys():
    print("." + ext, ":", dico[ext])
    res = res + dico[ext]

print("\nTOTAL :", res)
sys.exit(0)
